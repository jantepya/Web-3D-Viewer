(this.webpackJsonpcloud3d=this.webpackJsonpcloud3d||[]).push([[0],{40:function(e,t,n){},41:function(e,t,n){},50:function(e,t,n){},51:function(e,t,n){},52:function(e,t,n){"use strict";n.r(t);var r=n(8),o=n(4),i=n.n(o),s=n(25),c=n.n(s),a=(n(40),function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,56)).then((function(t){var n=t.getCLS,r=t.getFID,o=t.getFCP,i=t.getLCP,s=t.getTTFB;n(e),r(e),o(e),i(e),s(e)}))}),d=n(18),l=n(33),u=n(53),h=n(54),m=(n(41),function(){var e=Object(o.useState)(!1),t=Object(l.a)(e,2);t[0],t[1];return Object(r.jsx)("div",{children:Object(r.jsx)(u.a,{expand:"md",children:Object(r.jsx)(d.b,{to:"/",children:Object(r.jsx)(h.a,{children:"Cloud3D"})})})})}),f=n(0),j=n(6),p=n(2),v=n(3),b=n(1),w=n(27),O=n(28),L=n(29),x=n(24),g=n(55),S=(n(50),function(e){return Object(r.jsx)("option",{className:"sceneListItem",value:e.uuid,onSelect:e.onSelect,children:e.name})}),F=function(e){Object(p.a)(n,e);var t=Object(v.a)(n);function n(){var e;return Object(f.a)(this,n),(e=t.call(this)).removeFromSceneList=function(t){var n=Object(x.a)(e.state.sceneItems),r=n.findIndex((function(e){return e.uuid===t}));-1!==r&&(n.splice(r,1),e.setState({sceneItems:n}),e.props.onItemRemoved(t))},e.addToSceneList=function(t){e.setState((function(e){return{sceneItems:[].concat(Object(x.a)(e.sceneItems),[t])}}))},e.onDeleteButtonClicked=function(){if(e.sceneList.current&&e.sceneList.current.selectedOptions){var t,n=Object(L.a)(e.sceneList.current.selectedOptions);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.removeFromSceneList(r.value)}}catch(o){n.e(o)}finally{n.f()}}},e.onUploadButtonClicked=function(){var t=document.createElement("input");t.type="file",t.onchange=e.props.onFileSelected,t.click()},e.render=function(){return Object(r.jsxs)("div",{className:"sidebar",children:[Object(r.jsx)(g.a,{color:"primary",onClick:this.onUploadButtonClicked,children:"+"}),Object(r.jsx)(g.a,{color:"danger",onClick:this.onDeleteButtonClicked,children:"-"}),Object(r.jsx)("form",{children:Object(r.jsxs)("select",{multiple:"multiple",ref:this.sceneList,children:[" ",this.state.sceneItems.map((function(e){return Object(r.jsx)(S,Object(O.a)({},e))}))]})})]})},e.sceneList=i.a.createRef(),e.state={sceneItems:[]},e}return n}(i.a.Component),C=n(30),y=n(31),I=n(32),R={drc:0,ply:1,stl:2},E=function(){this.loaders={};var e=new C.a;e.setDecoderConfig({type:"wasm"}),e.setDecoderPath("https://www.gstatic.com/draco/versioned/decoders/1.4.1/"),e.preload(),this.loaders[R.drc]=e;var t=new y.a;this.loaders[R.ply]=t;var n=new I.a;this.loaders[R.stl]=n,this.onLoad=null,this.onProgress=null,this.onError=null};E.prototype.LoadURL=function(e,t){var n=this,r=function(e){var t=e.substring(e.lastIndexOf(".")+1,e.length)||e;return R[t]}(t),o=this.loaders[r];if(o){o.load(e,(function(e){n.onLoad&&n.onLoad(e,t)}),this.onProgress,this.onError)}else this.onError&&this.onError()},E.prototype.LoadFile=function(e){var t=this;if(e){var n=new FileReader;n.onload=function(){return t.LoadURL(n.result,e.name)},n.readAsDataURL(e)}};var k=E,B=(n(51),function(e){Object(p.a)(n,e);var t=Object(v.a)(n);function n(){var e;return Object(f.a)(this,n),(e=t.call(this)).addMeshToScene=function(t,n){var r=new b.l({color:11184810,flatShading:!0}),o=new b.k(t,r);o.name=n,e.scene.add(o),e.sideBar.current.addToSceneList(o)},e.removeElementFromScene=function(t){var n=e.scene.getObjectByProperty("uuid",t);n&&(n.geometry.dispose(),n.material.dispose(),e.scene.remove(n))},e.onWindowResize=function(){var t=window.innerWidth,n=window.innerHeight;e.camera.aspect=t/n,e.camera.updateProjectionMatrix(),e.renderer.setSize(t,n)},e.animate=function(){requestAnimationFrame(e.animate),e.render3D()},e.render3D=function(){e.renderer.render(e.scene,e.camera)},e.onFileSelectedForUpload=function(t){var n=t.target.files[0];e.meshLoader.LoadFile(n)},e.render=function(){var e=this;return Object(r.jsxs)("div",{className:"viewer",children:[Object(r.jsx)(F,{ref:this.sideBar,onFileSelected:this.onFileSelectedForUpload,onItemRemoved:this.removeElementFromScene}),Object(r.jsx)("div",{className:"window-3d noselect",ref:function(t){e.mount=t}})]})},e.sideBar=i.a.createRef(),e}return Object(j.a)(n,[{key:"componentDidMount",value:function(){this.renderer=new b.t({alpha:!0}),this.renderer.setPixelRatio(window.devicePixelRatio),this.mount.appendChild(this.renderer.domElement),this.camera=new b.m(75,window.innerWidth/window.innerHeight,.1,5e3),this.camera.position.set(0,0,5),this.orbitControls=new w.a(this.camera,this.renderer.domElement);var e=new b.d(16777215,1);e.position.set=5,this.scene=new b.o,this.scene.add(this.camera),this.scene.add(new b.a(3355443)),this.scene.add(e);var t=new k;t.onError=function(){return console.log("error")},t.onProgress=function(e){return console.log(e.loaded/e.total*100+"% loaded")},t.onLoad=this.addMeshToScene,this.meshLoader=t,window.addEventListener("resize",this.onWindowResize,!1),this.onWindowResize(),this.animate()}}]),n}(i.a.Component));c.a.render(Object(r.jsx)(i.a.StrictMode,{children:Object(r.jsxs)(d.a,{children:[Object(r.jsx)(m,{}),Object(r.jsx)(B,{})]})}),document.getElementById("root")),a()}},[[52,1,2]]]);
//# sourceMappingURL=main.370ef2e0.chunk.js.map